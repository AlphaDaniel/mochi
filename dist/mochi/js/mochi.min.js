/*!
 * Mochi v1.4.1 (https://github.com/codeworksdev/mochi)
 * Copyright (c) 2014-2018 CODEWORKS <support@codeworksnyc.com>
 * Licensed under the MIT license
 */
$(document).ready(function(){window.$m=new Mochi,$m.do(['mochi_page'+window.$m.getPage()+'_load','mochi_view'+window.$m.getView()+'_load','mochi_last'])});function Mochi(){this._options(),this._vars(),this._observer(),this._html(),this._fa(),this._body(),this._init()}Mochi.prototype={_options:function(){this.options={CLICK_NAME:'auto',ENABLE_SERVICE_WORKER:!1,SW_VERBOSE_SYNCING:!0,SW_UPDATE_NOTIFICATIONS:!0}},_vars:function(){this.__href=window.location.href,this.__html=$('html'),this.__head=$('head'),this.__body=$('body'),this.__container=this.__body.find('#container'),this.__content=this.__body.find('#content'),this.__page_name=/[\\\/]([^\\\\/\?]+)(\?.*)?$/.test(this.__href)?RegExp.$1.replace(/\.[^\.]+$/,''):'index',this.__observer=new MutationObserver(function(b){b.forEach($m._onMutation)}),this.__reserved=['cache','container','content','do','extend','getOnClickName','getOption','getPage','getState','getView','load','loadPage','loadView','onClick','onPageChange','onStateChange','onViewChange','options','sanitizeTitle','setOnClickName','setOption','setPage','setState','setView','unload','unloadPage','unloadView']},_observer:function(){this.__observer.observe(this.__html[0],{attributes:!0,childList:!0,characterData:!0})},_html:function(){var b=this.__html,g=b.attr('data-page'),i=b.attr('data-view'),j=new RegExp(/^\d+(\.\d+)?$/);j.test(g)||b.attr('data-page',0),j.test(i)||b.attr('data-view',0)},_fa:function(){var b=this.__html,g='fontawesome-i2svg-active';b.hasClass(g)||b.addClass(g.replace(/-\w+$/,'-no-icons-found'))},_body:function(){this.__html.addClass('is-page-'+this.sanitizeTitle(this.__page_name))},_init:function(){this.do('mochi_init'),this.__html.attr('manifest')&&(!0===this.getOption('SW_VERBOSE_SYNCING')&&(window.applicationCache.addEventListener('downloading',function(){setTimeout(function(){$m.onDownloading('SYNC FINISHED')},500)}),window.applicationCache.addEventListener('cached',function(){setTimeout(function(){$('#mochiAlertDownloading-container .alert').alert('close')},3e3)})),!0===this.getOption('SW_UPDATE_NOTIFICATIONS')&&window.applicationCache.addEventListener('updateready',function(){setTimeout(function(){setTimeout(function(){$('#mochiAlertDownloading-container .alert').alert('close')},3e3),$m.onUpdateReady()},500)})),this.options.ENABLE_SERVICE_WORKER&&'serviceWorker'in navigator?navigator.serviceWorker.register('./sw.js').then(b=>{console.log('ServiceWorker registration successful with scope: '+b.scope),b.addEventListener('updatefound',()=>{if(b.active){const g=b.installing;g.addEventListener('statechange',()=>{switch(g.state){case'activated':!0===$m.getOption('SW_UPDATE_NOTIFICATIONS')&&$m.onUpdateReady();}})}else{const g=b.installing;!0===$m.getOption('SW_VERBOSE_SYNCING')&&$m.onDownloading(),g.addEventListener('statechange',()=>{switch(g.state){case'activated':setTimeout(function(){$('#mochiAlertDownloading-container .alert').alert('close')},1e3);}})}})}).catch(function(b){console.error('ServiceWorker registration failed: '+b)}):this.__head.append('<link media="all" rel="icon" href="frontend/img/brand/launcher-icon-1x.png">')},_onMutation:function(b){window.mochi_onmutation&&_.isFunction(window.mochi_onmutation)&&mochi_onmutation(b)},cache:function(b,g,i){var j=new Image(g,i);return j.src=b,j},container:function(){return this.__body.find('#container')},content:function(){return this.__body.find('#content')},getOnClickName:function(){var b=this.getOption('CLICK_NAME');return'auto'==b?this.__html.hasClass('no-touchevents')?'click':'touchstart':b},getOption:function(b){return this.options[b]},getPage:function(b){return this.getState('Page',b)},getState:function(b,g){return window.s.pad(this.__html.attr('data-'+b.toLowerCase()),g?g:0,'0')},getView:function(b){return this.getState('View',b)},load:function(b,g){return /^\w+$/.test(b)&&/^\d+$/.test(g)?this.do('mochi_'+b+g+'_load'):this},loadPage:function(b){return this.load('Page',b)},loadView:function(b){return this.load('View',b)},onPageChange:function(b){return this.onStateChange('Page',b)},onStateChange:function(b,g){return this['unload'+b](g),this['load'+b](this.__html.attr('data-'+b.toLowerCase()))},onViewChange:function(b){return this.onStateChange('View',b)},unload:function(b,g){return /^\w+$/.test(b)&&/^\d+$/.test(g)?this.do('mochi_'+b+g+'_unload'):this},unloadPage:function(b){return this.unload('Page',b)},unloadView:function(b){return this.unload('View',b)},setOnClickName:function(b){return this.setOption('CLICK_NAME',b)},setPage:function(b,g){return this.setState('Page',b,g)},setView:function(b,g){return this.setState('View',b,g)},do:function(f,a){if(_.isArray(f))_.each(f,function(b){this.instance.do(b,this.args)},{instance:this,args:a});else{var c,k=this.sanitizeTitle(f,'_');/^[a-z][a-z\d_]*$/.test(k)&&(c='if(_.isFunction(window["'+k+'"]))window["'+k+'"].apply(this,a)',eval(c))}return this},extend:function(k,c,f){if(/^[a-z]\w*$/i.test(k)&&-1==$.inArray(k,this.__reserved))eval('this[k] = new c(c.mochi=this)'),f&&f.call(this[k]);else throw new MochiException('Cannot extend as "'+k+'". Name reserved or unsupported.');return this},onClick:function(b,g,i){var j,l=this.getOnClickName(),m=_.isFunction(g),q=m?{}:g,u=m?g:i;switch(typeof b){case'string':j=$(b);break;default:j=_.isElement(b)?$(b):b;}return j.on(l,q,u)},onDownloading:function(b){var j,g='mochiAlertDownloading',i=this.__body.find('#'+g+'-container');return i.length||(j=b&&/\S/.test(b)?$.trim(b):'SYNCING',this.__body.append('<div id="mochiAlertDownloading-container"><div class="alert alert-info alert-dismissible fade show" role="alert"><span class="small"><strong>'+j+'</strong>&nbsp;&nbsp;<i class="fas fa-cog fa-spin fa-lg"></i></span><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div></div>'),$('#'+g+'-container .alert').on('closed.bs.alert',new Function('$(\'#'+g+'-container\').remove()'))),this},onUpdateReady:function(){var b='mochiModalUpdateAvailable',g=this.__body.find('#'+b+'-container');return g.length||(this.__body.append('<div id="'+b+'-container"><button type="button" class="btn btn-success" data-toggle="modal" data-target="#'+b+'">Update Available</button></div><div class="modal fade" id="'+b+'" tabindex="-1" role="dialog" aria-labelledby="'+b+'Label" aria-hidden="true"><div class="modal-dialog modal-dialog-centered" role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="'+b+'Label">Software Update</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body"><p>Good news! A new software update is available for your app. We recommend updating now, but if you\'d like, you can hit cancel and manually refresh later.</p></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button><button type="button" class="btn btn-success" onclick="window.location.reload(true)">Update Now</button></div></div></div></div>'),$('#'+b).on('hidden.bs.modal',new Function('$(\'#'+b+'-container\').remove();$(this).modal(\'dispose\').remove()'))),this},sanitizeTitle:function(b,g){try{var i=(null==g?'-':g).toString(),j='('+i.replace(/([\.\(\)\$\^\*\+\-\?\|\{\}\[\]\\])/g,'\\$1')+')',l=new RegExp(j+'{2,}','g');return b.toString().toLowerCase().replace(/[^a-z\d]/ig,i).replace(l,i).replace(new RegExp('^'+j+'*|'+j+'*$','g'),'')}catch(m){return''}},setOption:function(b,g){if(_.isObject(b)){for(var i in b)this.setOption(i,b[i])}else b&&/^[a-z]\w*$/i.test(b)&&(this.options[b]=g);return this},setState:function(b,g,i){if(/^\d+$/.test(g)&&(i||g!=this['get'+b]())){var j='data-'+b.toLowerCase(),l=this.__html.attr(j);return this.__html.attr(j,g),this['on'+b+'Change'](l)}return this}};function MochiException(b){this.message=b,this.type='MochiException'}
