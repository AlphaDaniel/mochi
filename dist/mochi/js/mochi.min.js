/*!
 * Mochi v1.5 (https://github.com/codeworksdev/mochi)
 * Copyright (c) 2014-2018 CODEWORKS <support@codeworksnyc.com>
 * Licensed under the MIT license
 */
$(document).ready(function(){window.$m=new Mochi,$m.do(['mochi_load','mochi_load_page','mochi_load_page'+ +$m.getPage(),'mochi_load_view','mochi_load_view'+ +$m.getView(),'mochi_last'])});function Mochi(){this._options(),this._before(),this._vars(),this._observe(),this._html(),this._fa(),this._body(),this._init()}Mochi.prototype={_options:function(){var b={CLICK_NAME:'auto',DEBUG_MODE:!1,ENABLE_SERVICE_WORKER:!1,LAZY_LOAD_PLUGINS:[],SW_UPDATE_NOTIFICATIONS:!0,SW_UPDATE_NOTIFICATIONS_OPTIONS:{buttonTitle:'Update Available',dialogButtonTitle:'Update Now',dialogContent:'<p>Good news! A new software update is available for your app. We recommend updating now, but if you\'d like, you can hit cancel and manually refresh later.</p>',dialogTitle:'Software Update'},SW_VERBOSE_SYNCING:!0,SW_VERBOSE_SYNCING_OPTIONS:{text:'SYNCING',icon:'fa-cog',spin:!0}};this.default=JSON.parse(JSON.stringify(b)),this.options=JSON.parse(JSON.stringify(b))},_before:function(){this.do('mochi_before')},_vars:function(){this.__body=$('body'),this.__container=this.__body.find('#container'),this.__content=this.__body.find('#content'),this.__head=$('head'),this.__href=window.location.href,this.__html=$('html'),this.__observer=new MutationObserver(function(b){b.forEach($m._onMutation,$m)}),this.__page_name=/[\\\/]([^\\\\/\?]+)(\?.*)?$/.test(this.__href)?RegExp.$1.replace(/\.[^\.]+$/,''):'index'},_observe:function(){this.__observer.observe(this.__html[0],{attributes:!0,childList:!0,characterData:!0,subtree:!0})},_html:function(){var b=this.__html,g=b.attr('data-page'),j=b.attr('data-view'),l=new RegExp(/^\d+(\.\d+)?$/);l.test(g)||b.attr('data-page',0),l.test(j)||b.attr('data-view',0)},_fa:function(){var b=this.__html,g='fontawesome-i2svg-active';b.hasClass(g)||b.addClass(g.replace(/-\w+$/,'-no-icons-found'))},_body:function(){this.__html.addClass('is-page-'+this.sanitizeTitle(this.__page_name))},_init:function(){this.do('mochi_init'),this.__html.attr('manifest')&&(!0===this.getOption('SW_VERBOSE_SYNCING')&&(window.applicationCache.addEventListener('downloading',function(){setTimeout(function(){$m.widgetOnDownloading()},500)}),window.applicationCache.addEventListener('cached',function(){setTimeout(function(){$('#mochiAlertDownloading-container .alert').alert('close')},3e3)})),!0===this.getOption('SW_UPDATE_NOTIFICATIONS')&&window.applicationCache.addEventListener('updateready',function(){setTimeout(function(){setTimeout(function(){$('#mochiAlertDownloading-container .alert').alert('close')},3e3),$m.widgetOnUpdateReady()},500)})),this.options.ENABLE_SERVICE_WORKER&&'serviceWorker'in navigator?navigator.serviceWorker.register('./sw.js').then(b=>{console.log('ServiceWorker registration successful with scope: '+b.scope),b.addEventListener('updatefound',()=>{if(b.active){const g=b.installing;g.addEventListener('statechange',()=>{switch(g.state){case'activated':!0===$m.getOption('SW_UPDATE_NOTIFICATIONS')&&$m.widgetOnUpdateReady();}})}else{const g=b.installing;!0===$m.getOption('SW_VERBOSE_SYNCING')&&$m.widgetOnDownloading(),g.addEventListener('statechange',()=>{switch(g.state){case'activated':setTimeout(function(){$('#mochiAlertDownloading-container .alert').alert('close')},1e3);}})}})}).catch(function(b){console.error('ServiceWorker registration failed: '+b)}):!this.__head.find('link[rel="icon"]').length&&this.__head.append('<link media="all" rel="icon" href="frontend/img/brand/launcher-icon-1x.png">'),this.options.LAZY_LOAD_PLUGINS&&_.isArray(this.options.LAZY_LOAD_PLUGINS)&&this.options.LAZY_LOAD_PLUGINS.length&&_.each(this.options.LAZY_LOAD_PLUGINS,function(b){$.getScript('mochi/js/plugins/'+b+'/dist/'+b+'.min.js')},this)},_onMutation:function(b){window.mochi_onmutation&&_.isFunction(window.mochi_onmutation)&&(this.log('hook: mochi_onmutation('+b.constructor.name+')'),mochi_onmutation(b))},do:function(f,a){return _.isArray(f)?_.each(f,function(b){this.instance.do(b,this.args)},{instance:this,args:a}):f&&'string'==typeof f&&/^[a-zA-Z_\$][\w\$]*$/.test(f)&&window[f]&&_.isFunction(window[f])&&(this.log('hook: '+f+'.apply(Mochi, '+JSON.stringify(a)+')'),eval('window["'+f+'"].apply(this, a)')),this},extend:function(k,c,f){if(k&&'string'==typeof k&&/^[a-z]\w*$/i.test(k)){if(-1==$.inArray(k,['__body','__container','__content','__head','__href','__html','__observer','__page_name','_before','_body','_fa','_html','_init','_observe','_onMutation','_options','_vars','default','do','extend','getDefaultOption','getOnClickName','getOption','getPage','getState','getView','isSimpleObj','load','loadPage','loadView','log','onClick','options','sanitizeTitle','setOnClickName','setOption','setPage','setState','setView','unload','unloadPage','unloadView','widgetOnDownloading','widgetOnUpdateReady'])&&!_.has(this,k)&&_.isFunction(c))return this.log('extend: $m.'+k+' = new '+c.name+'()'),eval('this[k]=new c'),f&&_.isFunction(f)&&f.call(this[k]),this}throw new MochiError('Cannot extend as "'+k+'". Name reserved, unsupported, or already defined.')},getDefaultOption:function(b){return this.getOption(b,!0)},getOnClickName:function(){var b=this.getOption('CLICK_NAME');return'auto'==b?this.__html.hasClass('no-touchevents')?'click':'touchstart':b},getOption:function(b,g){if(b&&'string'==typeof b){var j=this[g?'default':'options'];if(_.has(j,b)){var l=_.isFunction(j[b])?j[b].call(this):j[b];return this.isSimpleObj(l)?JSON.parse(JSON.stringify(l)):l}}},getPage:function(b){return this.getState('page',b)},getState:function(b,g){if(b&&'string'==typeof b&&/^page|view$/i.test(b)){var j=this.__html.attr('data-'+b.toLowerCase());return window.s.pad(j&&/^\d+(\.\d+)?$/.test(j)?+j:0,g&&/^\d+$/.test(g)?+g:0,'0')}},getView:function(b){return this.getState('view',b)},isSimpleObj:function(b){return b&&_.isObject(b)&&!_.isArray(b)&&!_.isFunction(b)||void 0},load:function(b,g,j){if(b&&'string'==typeof b&&/^page|view$/i.test(b)&&/^\d+(\.\d+)?$/.test(g)){var b=b.toLowerCase(),g=+g,l='mochi_load_'+b+g.toString().replace(/\D/g,'_'),m=[_.defaults(this.isSimpleObj(j)?j:{},{caller:null,newStateNumber:g,oldStateNumber:g,stateName:b})];this.do(['mochi_load','mochi_load_'+b,l,'mochi_onchange'],m)}return this},loadPage:function(b,g){return this.load('page',b,g)},loadView:function(b,g){return this.load('view',b,g)},log:function(b,g){return(g||!0===this.getOption('DEBUG_MODE'))&&console.info(b),this},onClick:function(b,g,j){var w,l=this.getOnClickName(),m=_.isFunction(g),q=m?{}:g,u=m?g:j;switch(typeof b){case'string':w=$(b);break;default:w=_.isElement(b)?$(b):b;}return w.on(l,q,!!_.isFunction(u)&&u)},sanitizeTitle:function(b,g,j){try{var l=1<arguments.length&&/^string|number$/.test(typeof g)?g.toString():'-',m='('+l.replace(/([\.\(\)\$\^\*\+\-\?\|\{\}\[\]\\])/g,'\\$1')+')',q=new RegExp(m+'{2,}','g');return b=b.toString().toLowerCase().replace(/[^a-z\d]/ig,l).replace(q,l).replace(new RegExp('^'+m+'*|'+m+'*$','g'),''),b.length?b:/^string|number$/.test(typeof j)?this.sanitizeTitle(j):''}catch(u){return''}},setOnClickName:function(b){return b&&'string'==typeof b&&/^\w+$/i.test(b)?this.setOption('CLICK_NAME',b):this},setOption:function(b,g){if(this.isSimpleObj(b))_.each(b,function(m,q){this.setOption(q,m)},this);else if(b&&'string'==typeof b&&_.has(this.options,b)){var j='option: '+b+' = '+JSON.stringify(g),l=_.clone(this.options[b]);switch(b){default:this.log(j);break;case'DEBUG_MODE':g&&this.log(j,null,!0);}this.isSimpleObj(l)?this.isSimpleObj(g)&&_.each(g,function(m,q){_.has(this,q)&&(this[q]=m)},this.options[b]):this.options[b]=g}return this},setPage:function(b,g){return this.setState('page',b,g)},setState:function(b,g,j){if(b&&'string'==typeof b&&/^page|view$/i.test(b)&&/^\d+(\.\d+)?$/.test(g)){var l=window.s.capitalize(b,!0),m=+this['get'+l](),q=+g;if(q!=m){var u={caller:null,newStateNumber:q,oldStateNumber:m,stateName:l.toLowerCase()};this.__html.attr('data-'+l.toLowerCase(),q),this['unload'+l](m,_.extend(_.clone(u),{caller:'unload'+l})),this['load'+l](q,_.extend(_.clone(u),{caller:'load'+l})),j&&_.isFunction(j)&&j.call(this,_.extend(_.clone(u),{caller:j.constructor.name}))}}return this},setView:function(b,g){return this.setState('view',b,g)},unload:function(b,g,j){if(b&&'string'==typeof b&&/^page|view$/i.test(b)&&/^\d+(\.\d+)?$/.test(g)){var b=b.toLowerCase(),g=+g,l='mochi_unload_'+b+g.toString().replace(/\D/g,'_'),m=[_.defaults(this.isSimpleObj(j)?j:{},{caller:null,newStateNumber:g,oldStateNumber:g,stateName:b})];this.do(['mochi_unload','mochi_unload_'+b,l,'mochi_onchange'],m)}return this},unloadPage:function(b,g){return this.unload('page',b,g)},unloadView:function(b,g){return this.unload('view',b,g)},widgetOnDownloading:function(b,g,j){var q,u,w,x,z,A,l='mochiAlertDownloading',m=this.__body.find('#'+l+'-container');return m.length||(q=this.getOption('SW_VERBOSE_SYNCING_OPTIONS'),u=this.getDefaultOption('SW_VERBOSE_SYNCING_OPTIONS'),w=function(B){return /^string|number$/.test(typeof B)&&/\S/.test(B)},x=$.trim(w(b)?b:w(q.text)?q.text:u.text),z=$.trim(w(g)?g:w(q.icon)?q.icon:u.icon),A=3>arguments.length?!!q.spin:!!j,this.__body.append('<div id="mochiAlertDownloading-container"><div class="alert alert-info alert-dismissible fade show" role="alert"><span class="small"><strong>'+x+'</strong>&nbsp;&nbsp;<i class="fas '+z+(A?'fa-spin':'')+'fa-lg"></i></span><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div></div>'),$('#'+l+'-container .alert').on('closed.bs.alert',new Function('$(\'#'+l+'-container\').remove()'))),this},widgetOnUpdateReady:function(b,g,j,l){var u,w,x,z,m='mochiModalUpdateAvailable',q=this.__body.find('#'+m+'-container');return q.length||(u=this.getOption('SW_UPDATE_NOTIFICATIONS_OPTIONS'),w=this.getDefaultOption('SW_UPDATE_NOTIFICATIONS_OPTIONS'),x=function(A){return /^string|number$/.test(typeof A)&&/\S/.test(A)},z={},z.buttonTitle=$.trim(x(b)?b:x(u.buttonTitle)?u.buttonTitle:w.buttonTitle),z.dialogButtonTitle=$.trim(x(g)?g:x(u.dialogButtonTitle)?u.dialogButtonTitle:w.dialogButtonTitle),z.dialogContent=$.trim(x(j)?j:x(u.dialogContent)?u.dialogContent:w.dialogContent),z.dialogTitle=$.trim(x(l)?l:x(u.dialogTitle)?u.dialogTitle:w.dialogTitle),this.__body.append('<div id="'+m+'-container"><button type="button" class="btn btn-success" data-toggle="modal" data-target="#'+m+'">'+z.buttonTitle+'</button></div><div class="modal fade" id="'+m+'" tabindex="-1" role="dialog" aria-labelledby="'+m+'Label" aria-hidden="true"><div class="modal-dialog modal-dialog-centered" role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="'+m+'Label">'+z.dialogTitle+'</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body">'+z.dialogContent+'</div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button><button type="button" class="btn btn-success" onclick="window.location.reload(true)">'+z.dialogButtonTitle+'</button></div></div></div></div>'),$('#'+m).on('hidden.bs.modal',new Function('$(\'#'+m+'-container\').remove();$(this).modal(\'dispose\').remove()'))),this}};class MochiError extends Error{constructor(b){super(b),this.name='MochiError'}}
